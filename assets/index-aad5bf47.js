import{L as s,a1 as l}from"./el-message-box-e5e35739.js";import{d as h,r as m,w as z,u as S}from"./vue.esm-bundler-ca95eab4.js";var b=(e=>(e[e.dateTime=0]="dateTime",e[e.date=1]="date",e))(b||{});const M=(e,o,a)=>{if(o===0&&e)return l(e).format("YYYY-MM-DD HH:mm:ss");if(o===1&&e)return l(e).format("YYYY-MM-DD");if(e==="")return a},D=e=>{const o=h(null),a=m({currentPage:1,pageSize:20,total:0,pageSizes:[10,20,30,40,50],layout:"sizes, total, prev, pager, next, jumper","onUpdate:pageSize"(t){a.pageSize=t},"onUpdate:currentPage"(t){a.currentPage=t},...e.pagination}),r=m({loading:!1,data:[],selected:[],columns:e.columns.map(t=>{var f;const{defaultValue:n="-",rFormat:d,formatter:i,...p}=t;return((f=e.mapColumn)==null?void 0:f.call(e,t))??{...p,formatter:(Y,y,u,P)=>i?i(Y,y,u,P):M(u,d,n)??u??n}}),mode:e.mode??s.single,onNext(){r.mode===s.infinite&&c()},"onUpdate:selected"(t){r.selected=t},ref(t){o.value=t==null?void 0:t.elTable}}),g=async()=>{if(!(!e.query||r.loading)){try{r.loading=!0;const t=await e.query(S(a)),{list:n=[],total:d=0}=t??{},i=a.currentPage;r.data=i===1||r.mode===s.single?n:r.data.concat(n),a.total=d||n.length}catch(t){console.error(t)}r.loading=!1}},c=()=>{const{currentPage:t,pageSize:n,total:d=0}=a;!r.loading&&t*n<d&&(a.currentPage=t+1)};return z(()=>[a.currentPage],g),{tableState:r,pagination:a,table:o,handleQuery:g,handleNext:c}};export{b as F,M as d,D as u};
//# sourceMappingURL=index-aad5bf47.js.map
