import{r as d,w as y,u as P}from"./vue.esm-bundler-b66df92b.js";import{a0 as m}from"./el-message-box-9d0a0f53.js";var h=(e=>(e[e.single=0]="single",e[e.infinite=1]="infinite",e))(h||{}),z=(e=>(e[e.dateTime=0]="dateTime",e[e.date=1]="date",e))(z||{});const S=(e,a,r)=>{if(a===0&&e)return m(e).format("YYYY-MM-DD HH:mm:ss");if(a===1&&e)return m(e).format("YYYY-MM-DD");if(e==="")return r},D=e=>{const a=d({currentPage:1,pageSize:20,total:0,pageSizes:[10,20,30,40,50],layout:"sizes, total, prev, pager, next, jumper","onUpdate:pageSize"(t){a.pageSize=t},"onUpdate:currentPage"(t){a.currentPage=t},...e.pagination}),r=d({loading:!1,data:[],selected:[],columns:e.columns.map(t=>{var g;const{defaultValue:n="-",rFormat:i,formatter:o,...f}=t;return((g=e.mapColumn)==null?void 0:g.call(e,t))??{...f,formatter:(l,p,s,Y)=>o?o(l,p,s,Y):S(s,i,n)??s??n}}),mode:e.mode??0,onNext(){r.mode===1&&c()},"onUpdate:selected"(t){r.selected=t}}),u=async()=>{if(!(!e.query||r.loading)){try{r.loading=!0;const t=await e.query(P(a)),{list:n=[],total:i=0}=t??{},o=a.currentPage;r.data=o===1||r.mode===0?n:r.data.concat(n),a.total=i||n.length}catch(t){console.error(t)}r.loading=!1}},c=()=>{const{currentPage:t,pageSize:n,total:i=0}=a;!r.loading&&t*n<i&&(a.currentPage=t+1)};return y(()=>[a.currentPage],u),{tableState:r,pagination:a,handleQuery:u,handleNext:c}};export{z as F,h as L,S as d,D as u};
//# sourceMappingURL=index-3dfc0b61.js.map
