import{L as c,Z as v,a3 as P}from"./el-message-box-0e7d5819.js";import{P as y,x as w,r as C,u as f,w as D}from"./vue.esm-bundler-2b92b106.js";var M=(t=>(t[t.dateTime=0]="dateTime",t[t.date=1]="date",t))(M||{});const T=t=>P(t).format("YYYY-MM-DD HH:mm:ss"),A=t=>P(t).format("YYYY-MM-DD"),U=(t,u,r)=>{if(u===0&&t)return T(t);if(u===1&&t)return A(t);if(t==="")return r},q=t=>{const u=y(null),r=w({currentPage:1,pageSize:20,total:0,pageSizes:[10,20,30,40,50],layout:"sizes, total, prev, pager, next, jumper","onUpdate:pageSize"(e){r.pageSize=e},"onUpdate:currentPage"(e){r.currentPage=e},...t.pagination}),g=e=>{const{defaultValue:a="-",rFormat:o,formatter:d,...i}=e;return{...i,formatter:(s,Y,m,z)=>d?d(s,Y,m,z):U(m,o,a)??m??a,...e.type==="index"&&{index:e.index??(s=>t.mode===c.infinite?s+1:(r.currentPage-1)*r.pageSize+s+1)},...t.mapColumn&&t.mapColumn(e)}},l=y(t.columns.map(g)),n=C({loading:!1,pending:!1,data:[],selected:[],columns:f(l).filter(e=>!e.hidden),mode:t.mode??c.single,onNext(){n.mode===c.infinite&&h()},"onUpdate:selected"(e){n.selected=e},ref(e){u.value=e==null?void 0:e.elTable}}),p=async(e=!1)=>{if(!(!t.query||n.pending))try{n.pending=!0,!e&&(n.loading=!0);const a=await t.query(f(r)),{list:o=[],total:d=0}=a??{},i=r.currentPage;n.data=i===1||n.mode===c.single?o:n.data.concat(o),r.total=d||o.length,n.pending=!1,n.loading=!1}catch(a){throw n.pending=!1,n.loading=!1,a}},h=()=>{const{currentPage:e,pageSize:a,total:o=0}=r;!n.loading&&e*a<o&&(r.currentPage=e+1)},x=e=>{for(const a in e)a in n&&(a==="columns"&&Array.isArray(e.columns)?(l.value=e.columns.map(g),n.columns=f(l).filter(o=>!o.hidden)):n[a]=e[a])},S=(e,a)=>{if(!e)return;const o=typeof e=="string"?{[e]:a}:Array.isArray(e)?e.reduce((i,s)=>(s&&(i[s]=a),i),{}):e,d=[];for(const i of f(l)){const s=i.prop;s&&s in o&&(i.hidden=v(o[s])?!i.hidden:!o[s]),!i.hidden&&d.push(i)}n.columns=d};return D(()=>[r.currentPage],()=>p()),{tableState:n,pagination:r,table:u,handleQuery:p,handleNext:h,setState:x,toggleColumn:S}};export{M as F,U as d,q as u};
//# sourceMappingURL=index-17335d71.js.map
