import{L as f,a2 as p}from"./el-message-box-22c42fed.js";import{d as h,r as m,w as z,u as D}from"./vue.esm-bundler-ca95eab4.js";var T=(e=>(e[e.dateTime=0]="dateTime",e[e.date=1]="date",e))(T||{});const M=e=>p(e).format("YYYY-MM-DD HH:mm:ss"),b=e=>p(e).format("YYYY-MM-DD"),v=(e,i,n)=>{if(i===0&&e)return M(e);if(i===1&&e)return b(e);if(e==="")return n},U=e=>{const i=h(null),n=m({currentPage:1,pageSize:20,total:0,pageSizes:[10,20,30,40,50],layout:"sizes, total, prev, pager, next, jumper","onUpdate:pageSize"(t){n.pageSize=t},"onUpdate:currentPage"(t){n.currentPage=t},...e.pagination}),a=m({loading:!1,pending:!1,data:[],selected:[],columns:e.columns.map(t=>{var l;const{defaultValue:r="-",rFormat:o,formatter:s,...d}=t;return((l=e.mapColumn)==null?void 0:l.call(e,t))??{...d,formatter:(Y,P,u,S)=>s?s(Y,P,u,S):v(u,o,r)??u??r}}),mode:e.mode??f.single,onNext(){a.mode===f.infinite&&c()},"onUpdate:selected"(t){a.selected=t},ref(t){i.value=t==null?void 0:t.elTable}}),g=async(t=!1)=>{if(!(!e.query||a.pending)){try{a.pending=!0,!t&&(a.loading=!0);const r=await e.query(D(n)),{list:o=[],total:s=0}=r??{},d=n.currentPage;a.data=d===1||a.mode===f.single?o:a.data.concat(o),n.total=s||o.length}catch(r){console.error(r)}a.pending=!1,a.loading=!1}},c=()=>{const{currentPage:t,pageSize:r,total:o=0}=n;!a.loading&&t*r<o&&(n.currentPage=t+1)},y=t=>{for(const r in t)r in a&&(a[r]=t[r])};return z(()=>[n.currentPage],()=>g()),{tableState:a,pagination:n,table:i,handleQuery:g,handleNext:c,setState:y}};export{T as F,v as d,U as u};
//# sourceMappingURL=index-1afa3475.js.map
