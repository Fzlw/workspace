import{L as u,a1 as l}from"./el-message-box-4b2961fc.js";import{d as h,r as m,w as z,u as D}from"./vue.esm-bundler-ca95eab4.js";var S=(e=>(e[e.dateTime=0]="dateTime",e[e.date=1]="date",e))(S||{});const T=e=>l(e).format("YYYY-MM-DD HH:mm:ss"),b=e=>l(e).format("YYYY-MM-DD"),M=(e,o,a)=>{if(o===0&&e)return T(e);if(o===1&&e)return b(e);if(e==="")return a},w=e=>{const o=h(null),a=m({currentPage:1,pageSize:20,total:0,pageSizes:[10,20,30,40,50],layout:"sizes, total, prev, pager, next, jumper","onUpdate:pageSize"(t){a.pageSize=t},"onUpdate:currentPage"(t){a.currentPage=t},...e.pagination}),r=m({loading:!1,data:[],selected:[],columns:e.columns.map(t=>{var f;const{defaultValue:n="-",rFormat:d,formatter:i,...p}=t;return((f=e.mapColumn)==null?void 0:f.call(e,t))??{...p,formatter:(Y,y,s,P)=>i?i(Y,y,s,P):M(s,d,n)??s??n}}),mode:e.mode??u.single,onNext(){r.mode===u.infinite&&g()},"onUpdate:selected"(t){r.selected=t},ref(t){o.value=t==null?void 0:t.elTable}}),c=async()=>{if(!(!e.query||r.loading)){try{r.loading=!0;const t=await e.query(D(a)),{list:n=[],total:d=0}=t??{},i=a.currentPage;r.data=i===1||r.mode===u.single?n:r.data.concat(n),a.total=d||n.length}catch(t){console.error(t)}r.loading=!1}},g=()=>{const{currentPage:t,pageSize:n,total:d=0}=a;!r.loading&&t*n<d&&(a.currentPage=t+1)};return z(()=>[a.currentPage],c),{tableState:r,pagination:a,table:o,handleQuery:c,handleNext:g}};export{S as F,M as d,w as u};
//# sourceMappingURL=index-24b690c2.js.map
