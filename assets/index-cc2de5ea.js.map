{"version":3,"file":"index-cc2de5ea.js","sources":["../../../packages/component/src/useFormDialog/index.ts"],"sourcesContent":["import { computed, ref, watch } from 'vue'\nimport { useForm, UseFormOptions, SubmitPost } from '../useForm'\nimport { ElDialogProps } from '../FormDialog'\n\nexport type UseFormDialogOptions<T> = UseFormOptions<T> & {\n  post: SubmitPost<T>\n  onClose?: VoidFunction\n  onOpen?: VoidFunction\n}\n\nexport function useFormDialog<T extends object>(opts: UseFormDialogOptions<T>) {\n  const { formState, ...other } = useForm<T>(opts)\n  const visible = ref(false)\n  const dialogProps = ref({})\n\n  const submit = (post?: SubmitPost<T>) => {\n    other.submit(async (model) => {\n      post && (await post(model))\n\n      hide()\n    })\n  }\n\n  const formDialogState = computed(() => {\n    return {\n      formState: formState.value,\n      visible: visible.value,\n      submitting: formState.value.submitting,\n      'onUpdate:modelValue'(val: boolean) {\n        visible.value = val\n      },\n      onSubmit: () => submit(opts.post),\n      ...dialogProps.value,\n    }\n  })\n\n  const show = (props?: Partial<ElDialogProps> & { onSubmit?: VoidFunction }) => {\n    props && (dialogProps.value = props)\n    visible.value = true\n  }\n\n  const hide = () => {\n    visible.value = false\n  }\n\n  watch(visible, (val) => {\n    val ? opts.onOpen?.() : opts.onClose?.()\n  })\n\n  return {\n    ...other,\n    formDialogState,\n    show,\n    hide,\n    submit,\n  }\n}\n"],"names":["useFormDialog","opts","formState","other","useForm","visible","ref","dialogProps","submit","post","model","hide","formDialogState","computed","val","show","props","watch","_a","_b"],"mappings":"wGAUO,SAASA,EAAgCC,EAA+B,CAC7E,KAAM,CAAE,UAAAC,EAAW,GAAGC,CAAM,EAAIC,EAAWH,CAAI,EACzCI,EAAUC,EAAI,EAAK,EACnBC,EAAcD,EAAI,CAAA,CAAE,EAEpBE,EAAUC,GAAyB,CACjCN,EAAA,OAAO,MAAOO,GAAU,CACnBD,GAAA,MAAMA,EAAKC,CAAK,EAEpBC,GAAA,CACN,CAAA,EAGGC,EAAkBC,EAAS,KACxB,CACL,UAAWX,EAAU,MACrB,QAASG,EAAQ,MACjB,WAAYH,EAAU,MAAM,WAC5B,sBAAsBY,EAAc,CAClCT,EAAQ,MAAQS,CAClB,EACA,SAAU,IAAMN,EAAOP,EAAK,IAAI,EAChC,GAAGM,EAAY,KAAA,EAElB,EAEKQ,EAAQC,GAAiE,CAC7EA,IAAUT,EAAY,MAAQS,GAC9BX,EAAQ,MAAQ,EAAA,EAGZM,EAAO,IAAM,CACjBN,EAAQ,MAAQ,EAAA,EAGZ,OAAAY,EAAAZ,EAAUS,GAAQ,SACtBA,GAAMI,EAAAjB,EAAK,SAAL,MAAAiB,EAAA,KAAAjB,IAAkBkB,EAAAlB,EAAK,UAAL,MAAAkB,EAAA,KAAAlB,EAAe,CACxC,EAEM,CACL,GAAGE,EACH,gBAAAS,EACA,KAAAG,EACA,KAAAJ,EACA,OAAAH,CAAA,CAEJ"}